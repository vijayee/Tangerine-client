var Result,extend=function(t,e){function r(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;Result=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.url="result",e.prototype.initialize=function(t){var e,r;return t.blank===!0?(e=e||Device||{},r={name:e.name,platform:e.platform,uuid:e.uuid,version:e.version,userAgent:navigator.userAgent},this.set({subtestData:[],start_time:(new Date).getTime(),enumerator:Tangerine.user.name(),tangerine_version:Tangerine.version,device:r,instanceId:Tangerine.settings.getString("instanceId")}),this.unset("blank")):void 0},e.prototype.add=function(t,e){return null==e&&(e={}),this.setSubtestData(t,e),this.save(null,{success:e.success||$.noop,error:e.error||$.noop})},e.prototype.insert=function(t){var e,r,n,a,s,o;for(o=this.get("subtestData"),a=o,e=r=0,n=o.length;n>r;e=++r)if(s=o[e],s.subtestId===t.subtestId){a[e]=t;break}return this.set("subtestData",a)},e.prototype.setSubtestData=function(t){var e;return t.timestamp=(new Date).getTime(),e=this.get("subtestData"),e.push(t),this.set("subtestData",e)},e.prototype.getVariable=function(t){var e,r,n,a,s,o,u,i,l,p,f,c,g,h;for(l=this.get("subtestData"),n=0,o=l.length;o>n;n++)if(c=l[n],e=c.data,null!=e.labels){for(p=e.labels,r=a=0,u=p.length;u>a;r=++a)if(s=p[r],s===t)return e.location[r]}else for(h in e)if(g=e[h],h===t)return _.isObject(g)?_.compact(function(){var t;t=[];for(i in g)f=g[i],t.push("checked"===f?i:void 0);return t}()):g;return null},e.prototype.getByHash=function(t){var e,r,n,a;for(n=this.get("subtestData"),e=0,r=n.length;r>e;e++)if(a=n[e],t===a.subtestHash)return a.data;return null},e.prototype.getGridScore=function(t){var e,r,n,a;for(a=this.get("subtestData"),r=0,n=a.length;n>r;r++)if(e=a[r],e.subtestId===t)return parseInt(e.data.attempted)},e.prototype.getItemResultCountByVariableName=function(t,e){var r,n,a,s,o,u,i,l,p,f;for(a=!1,r=0,f=this.get("subtestData"),u=0,l=f.length;l>u;u++)if(n=f[u],null!=n.data&&null!=n.data.variable_name&&n.data.variable_name===t)for(a=!0,o=n.data.items,i=0,p=o.length;p>i;i++)s=o[i],s.itemResult===e&&r++;if(!a)throw new Error('Variable name "'+t+'" not found');return r},e.prototype.gridWasAutostopped=function(t){var e,r,n,a;for(a=this.get("subtestData"),r=0,n=a.length;n>r;r++)if(e=a[r],e.subtestId===t)return e.data.auto_stop},e}(Backbone.Model);