var KlassGroupingMenuView,extend=function(t,e){function r(){this.constructor=t}for(var s in e)hasProp.call(e,s)&&(t[s]=e[s]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;KlassGroupingMenuView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.className="KlassGroupingMenuView",e.prototype.events={"change .part_selector":"gotoKlassGroupingReport"},e.prototype.gotoKlassGroupingReport=function(t){return Tangerine.router.navigate("report/klassGrouping/"+this.klass.id+"/"+this.$el.find(t.target).find(":selected").attr("data-part"),!0)},e.prototype.initialize=function(t){return this.parent=t.parent,this.klass=this.parent.options.klass,this.curricula=this.parent.options.curricula,this.currentPart=this.klass.calcCurrentPart(),this.students=new Students,this.students.fetch({klassId:this.klass.id,success:function(t){return function(){var e;return e=new Subtests,e.fetch({success:function(e){var r,s,n,a,i;for(i=e.where({curriculaId:t.curricula.id}),t.parts=[],r=0,s=i.length;s>r;r++)a=i[r],n=a.get("part"),null==t.parts[n]&&(t.parts[n]={}),t.parts[n].id=a.id,null!=t.parts[n].name?t.parts[n].name+=" "+a.get("name"):t.parts[n].name=a.get("name"),t.parts[n].reportType=a.get("reportType");return t.ready=!0,t.render()}})}}(this)})},e.prototype.render=function(){var t,e,r,s,n,a,i;if(this.ready){if(null==this.students||0===this.students.length)return void this.$el.html("Please add students to this class.");for(e="<select class='part_selector'> <option disabled='disabled' selected='selected'>Select an assessment</option>",a=this.parts,n=r=0,s=a.length;s>r;n=++r)i=a[n],null!=(null!=i?i.id:void 0)&&(t=this.currentPart===n?"**":"",e+="<option data-part='"+n+"' data-subtestId='"+i.id+"'>"+t+" "+n+" "+i.name+"</option>");return e+="</select>",this.$el.html(e)}return this.$el.html("<img src='images/loading.gif' class='loading'>")},e}(Backbone.View);