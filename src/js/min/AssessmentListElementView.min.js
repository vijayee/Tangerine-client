var AssessmentListElementView,bind=function(e,t){return function(){return e.apply(t,arguments)}},extend=function(e,t){function s(){this.constructor=e}for(var n in t)hasProp.call(t,n)&&(e[n]=t[n]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty,slice=[].slice;AssessmentListElementView=function(e){function t(){return this.assessmentDelete=bind(this.assessmentDelete,this),this.updateResultCount=bind(this.updateResultCount,this),this.update=bind(this.update,this),this.ghostLogin=bind(this.ghostLogin,this),t.__super__.constructor.apply(this,arguments)}return extend(t,e),t.prototype.className="AssessmentListElementView",t.prototype.tagName="li",t.prototype.events=Modernizr.touch?{"click .assessment_menu_toggle":"assessmentMenuToggle","click .admin_name":"assessmentMenuToggle","click .sp_assessment_delete":"assessmentDeleteToggle","click .sp_assessment_delete_cancel":"assessmentDeleteToggle","click .sp_assessment_delete_confirm":"assessmentDelete","click .sp_copy":"copyTo","click .sp_duplicate":"duplicate","click .sp_update":"update","click .sp_print":"togglePrint","click .archive":"archive","click a":"respondToLink","change #print_format":"print"}:{"click .assessment_menu_toggle":"assessmentMenuToggle","click .admin_name":"assessmentMenuToggle","click .sp_assessment_delete":"assessmentDeleteToggle","click .sp_assessment_delete_cancel":"assessmentDeleteToggle","click .sp_assessment_delete_confirm":"assessmentDelete","click .sp_copy":"copyTo","click .sp_duplicate":"duplicate","click .sp_update":"update","click .sp_print":"togglePrint","click .archive":"archive","change #print_format":"print"},t.prototype.blankResultCount="-",t.prototype.initialize=function(e){return console.log("list element view render"),this.model=e.model,this.parent=e.parent,this.isAdmin=Tangerine.user.isAdmin()},t.prototype.respondToLink=function(e){var t,s;return t=$(e.target),s=t.attr("href"),Tangerine.router.navigate(s,!0)},t.prototype.ghostLogin=function(){return Tangerine.user.ghostLogin(Tangerine.settings.upUser,Tangerine.settings.upPass)},t.prototype.update=function(){return Utils.midAlert("Verifying connection"),Utils.working(!0),this.model.verifyConnection({error:function(e){return function(){return Utils.working(!1),Utils.midAlert("Verifying connection<br>Please retry update."),_.delay(function(){return e.ghostLogin()},5e3)}}(this),success:function(e){return function(){return Utils.working(!1),e.model.on("status",function(t){return"import lookup"===t?Utils.midAlert("Update starting"):"import success"===t?(Utils.midAlert("Updated"),Utils.working(!1),e.model.fetch({success:function(){return e.render()}})):"import error"===t?(Utils.working(!1),Utils.midAlert("Update failed")):void 0}),Utils.working(!0),Utils.updateFromServer(e.model)}}(this)})},t.prototype.togglePrint=function(){return this.$el.find(".print_format_wrapper").toggle()},t.prototype.print=function(){var e;return e=this.$el.find("#print_format option:selected").attr("data-format"),"cancel"===e?(this.$el.find(".print_format_wrapper").toggle(),void this.$el.find("#print_format").val("reset")):Tangerine.router.navigate("print/"+this.model.id+"/"+e,!0)},t.prototype.updateResultCount=function(){},t.prototype.assessmentMenuToggle=function(){return this.$el.find(".assessment_menu_toggle").toggleClass("sp_down").toggleClass("sp_right"),this.$el.find(".assessment_menu").toggle()},t.prototype.assessmentDeleteToggle=function(){return this.$el.find(".sp_assessment_delete_confirm").toggle(),!1},t.prototype.assessmentDelete=function(){return this.model.destroy()},t.prototype.spriteListLink=function(){var e,t,s,n,i,r;for(r=arguments[0],n=2<=arguments.length?slice.call(arguments,1):[],i="",e=0,t=n.length;t>e;e++)s=n[e],i+="<"+r+" class='sp_"+s.underscore()+"'><a href='#"+s+"/"+this.model.id+"'>"+s.underscore().titleize()+"</a></"+r+">";return i},t.prototype.spriteEvents=function(){var e,t,s,n,i,r;for(r=arguments[0],n=2<=arguments.length?slice.call(arguments,1):[],i="",e=0,t=n.length;t>e;e++)s=n[e],i+="<"+r+"><button class='sp_"+s.underscore()+"' title='"+s.underscore().titleize()+"'>"+s.underscore().titleize()+"</button></"+r+"> ";return i},t.prototype.ul=function(e){var t;return t="<ul "+(e.cssClass?"class='"+e.cssClass+"'":"")+">",t+=this.spriteListLink.apply(this,["li"].concat(e.links)),t+=e.other||"",t+="</ul>"},t.prototype.render=function(){var e,t,s,n,i;return i="<div class='assessment_menu_toggle sp_right'><div></div></div>",t="<button class='name clickable'>"+this.model.get("name")+"</button>",e="<button class='admin_name clickable'>"+this.model.get("name")+"</button>",s="<span class='result_count no_help'>Results <b>"+this.resultCount+"</b></span>",n=" selected='selected'",this.isAdmin?this.$el.html("<div> "+i+" "+e+" </div>"+this.ul({cssClass:"assessment_menu",links:["run","results","update","delete"],other:deleteConfirm})):(console.log("got here"),this.$el.html("<div class='non_admin'> "+this.spriteListLink("span","run")+t+" "+this.spriteListLink("span","results")+" </div>")),this.trigger("rendered")},t}(Backbone.View);