var IdRunView,extend=function(t,e){function i(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;IdRunView=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return extend(i,e),i.prototype.className="id",i.prototype.events={"click #generate":"generate","change #participant_id":"setValidator"},i.prototype.i18n=function(){return this.text={identifier:t("IdRunView.label.identifier"),generate:t("IdRunView.button.generate")}},i.prototype.initialize=function(t){return console.log(t),this.i18n(),this.model=t.model,this.parent=t.parent,this.dataEntry=t.dataEntry,this.validator=new CheckDigit},i.prototype.render=function(){var t,e;return this.dataEntry||(e=this.parent.parent.result.getByHash(this.model.get("hash")),e&&(t=e.participant_id)),this.$el.html("<form> <label for='participant_id'>"+this.text.identifier+"</label> <input id='participant_id' name='participant_id' value='"+(t||"")+"'> <button id='generate' class='command'>"+this.text.generate+"</button> <div class='messages'></div> </form>"),this.trigger("rendered"),this.trigger("ready")},i.prototype.getResult=function(){return{participant_id:this.$el.find("#participant_id").val()}},i.prototype.getSkipped=function(){return{participant_id:"skipped"}},i.prototype.setValidator=function(){return this.validator.set(this.getResult().participant_id)},i.prototype.isValid=function(){return this.setValidator(),this.validator.isValid()?this.updateNavigation():!1},i.prototype.showErrors=function(){return this.$el.find(".messages").html(this.validator.getErrors().join(", "))},i.prototype.generate=function(){return this.$el.find(".messages").empty(),this.$el.find("#participant_id").val(this.validator.generate()),!1},i.prototype.updateNavigation=function(){return Tangerine.nav.setStudent(this.getResult().participant_id)},i}(Backbone.View);