var ResultView,extend=function(t,e){function s(){this.constructor=t}for(var i in e)hasProp.call(e,i)&&(t[i]=e[i]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;ResultView=function(e){function s(){return s.__super__.constructor.apply(this,arguments)}return extend(s,e),s.prototype.className="result_view",s.prototype.events={"click .save":"save","click .another":"another"},s.prototype.another=function(){return window.location.reload()},s.prototype.save=function(){var t;return this.model.add({name:"Assessment complete",prototype:"complete",data:{comment:this.$el.find("#additional-comments").val()||"",end_time:(new Date).getTime()},subtestId:"result",sum:{correct:1,incorrect:0,missing:0,total:1}}),this.model.save()?(Tangerine.activity="",Utils.midAlert(this.text.saved),this.$el.find(".save_status").html(this.text.saved),this.$el.find(".save_status").removeClass("not_saved"),this.$el.find(".question").fadeOut(250),t=this.$el.find("button.save"),t.removeClass("save").addClass("another").html(this.text.another)):(Utils.midAlert("Save error"),this.$el.find(".save_status").html("Results may not have saved"))},s.prototype.i18n=function(){return this.text={assessmentComplete:t("ResultView.label.assessment_complete"),comments:t("ResultView.label.comments"),subtestsCompleted:t("ResultView.label.subtests_completed"),save:t("ResultView.button.save"),another:t("ResultView.button.another"),saved:t("ResultView.message.saved"),notSaved:t("ResultView.message.not_saved")}},s.prototype.initialize=function(t){return this.i18n(),this.model=t.model,this.assessment=t.assessment,this.saved=!1,this.resultSumView=new ResultSumView({model:this.model,finishCheck:!1})},s.prototype.render=function(){return this.$el.html("<h2>"+this.text.assessmentComplete+"</h2> <button class='save command'>"+this.text.save+"</button> <div class='info_box save_status not_saved'>"+this.text.notSaved+"</div> <br> <div class='question'> <label class='prompt' for='additional-comments'>"+this.text.comments+"</label> <textarea id='additional-comments' class='full_width'></textarea> </div> <div class='label_value'> <h2>"+this.text.subtestsCompleted+"</h2> <div id='result_sum' class='info_box'></div> </div>"),this.resultSumView.setElement(this.$el.find("#result_sum")),this.resultSumView.render(),this.trigger("rendered")},s.prototype.onClose=function(){return this.resultSumView.close()},s}(Backbone.View);